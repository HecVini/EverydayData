ipca.R = ipeadata(code = 'PRECOS12_IPCA12') %>% tibble()
ipca = ipca.R %>% subset(select = c(2,3)) %>% setnames(c('date','inflation_index'))
ipca = ipca %>% filter(date >= ymd('1995-12-01'), date <= ymd('2020-12-01'))

ipca_monthly = ipca %>% mutate(inflation_rate = (inflation_index/lag(inflation_index)))
ipca_monthly = ipca_monthly %>% arrange(desc(date))
ipca_monthly = ipca_monthly %>% drop_na() %>% mutate(cumulative_inflation = cumprod(inflation_rate)) 
ipca_monthly = ipca_monthly %>% arrange(date)
ipca_monthly = ipca_monthly %>% subset(select = c(date,cumulative_inflation))
ipca_yearly = ipca %>% filter(month(date) %in% c(1,12), year(date) >= 1995)
ipca_yearly = ipca_yearly %>% mutate(inflation_rate = (inflation_index/lag(inflation_index)))
ipca_yearly = ipca_yearly %>% arrange(desc(date))
ipca_yearly = ipca_yearly %>% drop_na() %>% mutate(cumulative_inflation = cumprod(inflation_rate)) 
ipca_yearly = ipca_yearly %>% arrange(date)
ipca_yearly = ipca_yearly %>% subset(select = c(date,cumulative_inflation)) %>% filter(month(date) == 12)
ipca_yearly = ipca_yearly %>% mutate(year = year(date)) %>% subset(select = c(year,cumulative_inflation))

deflator_implicito.R = ipeadata(code = 'SCN10_DIPIBG10') %>% tibble()
deflator_implicito = deflator_implicito.R %>% subset(select = c(2,3)) %>% setnames(c('date','inflation_rate'))
deflator_implicito = deflator_implicito %>% filter(date >= ymd('1995-12-01'), date <= ymd('2021-12-01'))
deflator_implicito = deflator_implicito %>% mutate(year = year(date))
deflator_implicito = deflator_implicito %>% mutate(inflation_rate = 1+(inflation_rate/100))
deflator_implicito = deflator_implicito %>% subset(select = c(year,inflation_rate))
deflator_implicito = deflator_implicito %>% arrange(desc(year))
deflator_implicito = deflator_implicito %>% drop_na() %>% mutate(cumulative_inflation = cumprod(inflation_rate)) 
deflator_implicito = deflator_implicito %>% arrange(year)
deflator_implicito = deflator_implicito %>% subset(select = c(year,cumulative_inflation))
